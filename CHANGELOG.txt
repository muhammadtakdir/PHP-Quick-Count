================================================================================
                    CHANGELOG - QUICK COUNT SYSTEM
                    Aplikasi Hitung Cepat Pemilihan
================================================================================

Versi: 2.0.0
Tanggal Mulai: November 2025
Developer: AI Assistant (GitHub Copilot)

================================================================================
                            DAFTAR PERUBAHAN
================================================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[29 November 2025] - Pengamanan Duplikat Nama Wilayah
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TUJUAN:
Mencegah input nama wilayah yang duplikat dengan typo atau variasi penulisan.

PERUBAHAN:
1. File: includes/functions.php
   - Tambah fungsi normalizeString() - menghapus spasi dan lowercase
   - Tambah fungsi checkDuplicateKabupaten() - cek duplikat kabupaten
   - Tambah fungsi checkDuplicateKecamatan() - cek duplikat kecamatan
   - Tambah fungsi checkDuplicateDesa() - cek duplikat desa

2. File: pages/kabupaten.php
   - Validasi kode wilayah wajib diisi
   - Validasi duplikat nama dalam provinsi yang sama

3. File: pages/kecamatan.php
   - Validasi kode wilayah wajib diisi
   - Validasi duplikat nama dalam kabupaten yang sama

4. File: pages/desa.php
   - Validasi kode wilayah wajib diisi
   - Validasi duplikat nama dalam kecamatan yang sama

CONTOH YANG DITOLAK:
- "Sinjai Utara" vs "SINJAI UTARA" â†’ Duplikat
- "Sinjai Utara" vs "SinjaiUtara" â†’ Duplikat
- "Sinjai Utara" vs "sinjai utara" â†’ Duplikat

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[29 November 2025] - Implementasi Level User (Role-Based Access)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TUJUAN:
Membatasi akses berdasarkan role user (Admin, Operator, Viewer).

PERUBAHAN:
1. File: pages/users.php
   - Update form role dengan penjelasan akses
   - Menggunakan requireAdmin() - hanya admin bisa akses

2. File: pages/settings.php
   - Menggunakan requireAdmin() - hanya admin bisa akses

3. File: input-suara.php
   - Viewer tidak bisa input suara, redirect ke grafik.php

4. File: includes/header.php
   - Menu Konfigurasi & Pengguna hanya untuk Admin
   - Menu Input Suara disembunyikan untuk Viewer

5. File: pages/provinsi.php, kabupaten.php, kecamatan.php, desa.php, tps.php, calon.php
   - Tambah variabel $isViewer
   - Tombol Tambah/Edit/Hapus disembunyikan untuk Viewer
   - Aksi POST diblokir untuk Viewer

MATRIKS AKSES:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fitur                â”‚ Admin â”‚ Operator â”‚ Viewer â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dashboard            â”‚   âœ“   â”‚    âœ“     â”‚   âœ“    â”‚
â”‚ Grafik & Rekap       â”‚   âœ“   â”‚    âœ“     â”‚   âœ“    â”‚
â”‚ Input Suara          â”‚   âœ“   â”‚    âœ“     â”‚   âœ—    â”‚
â”‚ Lihat Master Data    â”‚   âœ“   â”‚    âœ“     â”‚   âœ“    â”‚
â”‚ Edit Master Data     â”‚   âœ“   â”‚    âœ“     â”‚   âœ—    â”‚
â”‚ Konfigurasi Sistem   â”‚   âœ“   â”‚    âœ—     â”‚   âœ—    â”‚
â”‚ Kelola User          â”‚   âœ“   â”‚    âœ—     â”‚   âœ—    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[29 November 2025] - Toggle Izinkan Edit Master Provinsi/Kabupaten
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TUJUAN:
Memberikan opsi untuk tetap bisa mengedit master data provinsi/kabupaten 
meskipun sudah dikonfigurasi.

PERUBAHAN:
1. Database: ALTER TABLE settings
   - Tambah kolom izinkan_edit_provinsi TINYINT(1) DEFAULT 0
   - Tambah kolom izinkan_edit_kabupaten TINYINT(1) DEFAULT 0

2. File: pages/settings.php
   - Tambah checkbox "Izinkan Edit Provinsi"
   - Tambah checkbox "Izinkan Edit Kabupaten/Kota"
   - Update query SQL untuk menyimpan nilai checkbox

3. File: includes/header.php
   - Update kondisi tampil menu Provinsi dan Kabupaten
   - Menu tampil jika: belum dikonfigurasi ATAU izinkan_edit diaktifkan

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[28 November 2025] - Filter Data Berdasarkan Konfigurasi
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TUJUAN:
Jika provinsi/kabupaten sudah dikonfigurasi, filter data otomatis dan 
sembunyikan menu yang tidak relevan.

PERUBAHAN:
1. File: includes/header.php
   - Sembunyikan menu Provinsi jika id_provinsi_aktif sudah diset
   - Sembunyikan menu Kabupaten jika id_kabupaten_aktif sudah diset

2. File: pages/kecamatan.php
   - Force filter berdasarkan settings
   - Sembunyikan dropdown provinsi/kabupaten jika sudah dikonfigurasi

3. File: pages/desa.php
   - Force filter berdasarkan settings
   - Sembunyikan dropdown provinsi/kabupaten jika sudah dikonfigurasi

4. File: pages/tps.php
   - Force filter berdasarkan settings
   - Sembunyikan dropdown provinsi/kabupaten jika sudah dikonfigurasi

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[28 November 2025] - Halaman Publik Quick Count
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TUJUAN:
Membuat halaman publik untuk melihat hasil quick count tanpa login.

PERUBAHAN:
1. File baru: publik.php
   - Tampilan hasil quick count untuk publik
   - Grafik doughnut perolehan suara
   - Tabel rekap per kecamatan dengan drill-down
   - Auto-refresh setiap 30 detik
   - Tidak ada tombol login admin (dihapus sesuai permintaan)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[28 November 2025] - Drill-Down Rekap Sampai Tingkat TPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TUJUAN:
Menampilkan rekap suara dengan drill-down dari Kecamatan â†’ Desa â†’ TPS.

PERUBAHAN:
1. File: grafik.php
   - Tambah tabel rekap per kecamatan
   - Klik kecamatan untuk lihat rekap per desa
   - Klik desa untuk lihat rekap per TPS
   - Menggunakan DataTables dengan pagination
   - Fix error kolom DataTables tidak sesuai

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[28 November 2025] - Perbaikan Grafik dan Dashboard
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TUJUAN:
Memperbaiki masalah "grafik turun" dan tampilan chart.

PERUBAHAN:
1. File: grafik.php
   - Fix tinggi container chart (min-height: 400px)
   - Fix DataTables column count error
   - Perbaikan responsif chart

2. File: index.php (Dashboard)
   - Fix tampilan chart di dashboard
   - Perbaikan statistik card

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[28 November 2025] - Freeze Dropdown Berdasarkan Konfigurasi
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TUJUAN:
Jika provinsi/kabupaten sudah dikonfigurasi, dropdown tersebut di-freeze
(disabled) di halaman input dan master data.

PERUBAHAN:
1. File: input-suara.php
   - Freeze dropdown provinsi/kabupaten jika sudah dikonfigurasi
   - Auto-select value dari settings
   - Tampilkan ikon ğŸ”’ untuk field yang di-freeze

2. File: pages/calon.php
   - Freeze dropdown sesuai jenis pemilihan dan settings

3. File: pages/kecamatan.php, desa.php, tps.php
   - Freeze dropdown provinsi/kabupaten di form modal
   - Auto-select dan disabled jika sudah dikonfigurasi

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[27-28 November 2025] - Pembuatan Aplikasi Baru
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TUJUAN:
Membuat aplikasi Quick Count yang lebih sederhana, modern, dan fleksibel
dengan cakupan hingga tingkat provinsi dan presiden.

STRUKTUR APLIKASI BARU:

ğŸ“ bone/
â”œâ”€â”€ ğŸ“ api/                    # API endpoints
â”‚   â”œâ”€â”€ get-kabupaten.php
â”‚   â”œâ”€â”€ get-kecamatan.php
â”‚   â”œâ”€â”€ get-desa.php
â”‚   â”œâ”€â”€ get-tps.php
â”‚   â””â”€â”€ get-suara-tps.php
â”œâ”€â”€ ğŸ“ assets/                 # Assets (CSS, JS, Images)
â”‚   â”œâ”€â”€ ğŸ“ css/
â”‚   â”œâ”€â”€ ğŸ“ js/
â”‚   â””â”€â”€ ğŸ“ img/
â”œâ”€â”€ ğŸ“ auth/                   # Authentication
â”‚   â”œâ”€â”€ login.php
â”‚   â””â”€â”€ logout.php
â”œâ”€â”€ ğŸ“ config/                 # Configuration
â”‚   â”œâ”€â”€ config.php
â”‚   â””â”€â”€ database.php
â”œâ”€â”€ ğŸ“ includes/               # Shared components
â”‚   â”œâ”€â”€ header.php
â”‚   â”œâ”€â”€ footer.php
â”‚   â””â”€â”€ functions.php
â”œâ”€â”€ ğŸ“ pages/                  # Admin pages
â”‚   â”œâ”€â”€ provinsi.php
â”‚   â”œâ”€â”€ kabupaten.php
â”‚   â”œâ”€â”€ kecamatan.php
â”‚   â”œâ”€â”€ desa.php
â”‚   â”œâ”€â”€ tps.php
â”‚   â”œâ”€â”€ calon.php
â”‚   â”œâ”€â”€ settings.php
â”‚   â”œâ”€â”€ users.php
â”‚   â””â”€â”€ profile.php
â”œâ”€â”€ ğŸ“ uploads/                # Upload directory
â”‚   â”œâ”€â”€ ğŸ“ calon/
â”‚   â”œâ”€â”€ ğŸ“ c1/
â”‚   â””â”€â”€ ğŸ“ users/
â”œâ”€â”€ index.php                  # Dashboard
â”œâ”€â”€ input-suara.php            # Input suara
â”œâ”€â”€ grafik.php                 # Grafik & Rekap
â”œâ”€â”€ publik.php                 # Halaman publik
â””â”€â”€ login.php                  # Login page

DATABASE: quickcount
TABEL:
- provinsi (id, kode, nama, is_active)
- kabupaten (id, id_provinsi, kode, nama, tipe, is_active)
- kecamatan (id, id_kabupaten, kode, nama, is_active)
- desa (id, id_kecamatan, kode, nama, tipe, is_active)
- tps (id, id_desa, nomor_tps, dpt, alamat, is_active)
- calon (id, jenis_pemilihan, id_provinsi, id_kabupaten, nomor_urut, 
         nama_calon, nama_wakil, partai, visi, misi, foto_calon, 
         foto_wakil, warna, is_active)
- suara (id, id_tps, id_calon, jumlah_suara, suara_tidak_sah, 
         foto_c1, catatan, input_by, created_at, updated_at)
- users (id, username, password, nama_lengkap, email, telepon, 
         role, foto, is_active, last_login, created_at, updated_at)
- settings (id, nama_pemilihan, jenis_pemilihan, tingkat_wilayah,
            id_provinsi_aktif, id_kabupaten_aktif, izinkan_edit_provinsi,
            izinkan_edit_kabupaten, tahun_pemilihan, logo, warna_tema,
            is_active, created_at, updated_at)

TEKNOLOGI:
- PHP 8.2.12
- MySQL/MariaDB
- Bootstrap 5.3.2
- jQuery 3.7.1
- Chart.js 4.4.1
- DataTables 1.13.7
- Select2 4.1.0
- Bootstrap Icons

FITUR UTAMA:
âœ“ Multi-level pemilihan (Pilpres, Pilgub, Pilbup, Pilwalkot)
âœ“ Hierarki wilayah lengkap (Provinsi â†’ Kabupaten â†’ Kecamatan â†’ Desa â†’ TPS)
âœ“ Dashboard dengan statistik real-time
âœ“ Input suara dengan upload foto C1
âœ“ Grafik perolehan suara (Doughnut & Bar)
âœ“ Rekap drill-down sampai tingkat TPS
âœ“ Halaman publik untuk melihat hasil
âœ“ Role-based access control (Admin, Operator, Viewer)
âœ“ Konfigurasi sistem yang fleksibel
âœ“ Responsive design untuk mobile

================================================================================
                              CATATAN TEKNIS
================================================================================

1. DEFAULT LOGIN:
   Username: admin
   Password: admin123

2. UPLOAD DIRECTORY:
   Pastikan folder uploads/ memiliki permission write (755 atau 777)

3. DATABASE:
   - Host: localhost
   - Database: quickcount
   - User: root (default XAMPP)
   - Password: (kosong)

4. URL:
   http://localhost/bone/

================================================================================
                            END OF CHANGELOG
================================================================================
